{% extends 'settings/base.html' %}
{% block title %}Profile{% endblock %}

{% block header %}
{% endblock %}


{% block content %}
<!-- Account Details -->
<div class="rounded-lg mx-3 mt-5">
    <div class="mx-3 flex flex-col">
        <div class="w-full ml-2">
            <p class="font-medium">Profile Apperance - Avatar</p>
            <div class="h-1 w-10 bg-hsl-60 rounded-full mt-1"></div>
        </div>

        <div class="my-5 flex flex-col md:flex-row mx-2">
            <form id="upload-profile" action="/settings/customization/avatar" method="post" enctype="multipart/form-data">
                <div class="mt-3" id="selection">
                    <div class="text-sm mb-4">We recommend an image of at least 512x512 (or 1:1 ratio).
                        You can upload a PNG, JPG under 5MB<br><br>
                        Please note that uploading nsfw images or images that break the rules<br>
                        is prohibited and may result in you being banned from changing your avatar
                    </div>
                    <label class="file-label">
                        <input class="hidden" id="file" type="file" accept="image/jpeg" name="avatar">
                        <span class="px-4 py-2 text-xs rounded-lg text-gray-50 bg-hsl-60
                                    hover:text-hsl-90 active:bg-gray-50 active:text-hsl-30
                                    transition duration-200">
                            <span>
                                Choose file <i class="fa fa-upload ml-2"></i>
                            </span>
                        </span>
                    </label>
                    <button class="px-4 py-2 text-xs rounded-lg text-gray-50 bg-hsl-60
                                hover:text-hsl-90 active:bg-gray-50 active:text-hsl-30
                                transition duration-200 ml-3"
                            type="submit">
                        <p class="text-xs">
                            <i class="fas fa-check mr-2"></i><span>Save</span>
                        </p>
                    </button>
                </div>
            </form>
            <div class="flex flex-col md:ml-auto mt-4 md:-mt-8">
                <h4 class="text-lg font-medium">Preview</h4>
                <div class="h-1 w-6 bg-hsl-60 rounded-full mt-1 mb-2"></div>
                <div class="flex justify-center" id="avatar">
                    <img id="avatar-img" alt="avatar"
                         src="https://a.{{ domain() }}/{{ session.user_data['id']}}"
                         class="rounded-lg h-40 w-40">
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block bottom %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.5/cropper.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.5/cropper.css" />
<script>
    $("#file")
      .change(function (e) {
        var f = e.target.files;
        if (f.length < 1) {
          return;
        }
        var u = window.URL.createObjectURL(f[0]);
        var i = $("#avatar-img")[0];
        i.src = u;
        $('#avatar-img').attr('src', i.src)
      });
  </script>
{% endblock %}